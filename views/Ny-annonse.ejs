<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="icon" href="ishtri1.png" sizes="16x16 32x32" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="form.lag_nyannonse">New ad</title>
</head>
<body data-page="newAd">
    <script src="/socket.io/socket.io.js"></script>
    <%- include('partials/navbar') %>
    
    <!-- Page Container -->
    <div class="ny-annonse-container">
        <!-- Heading -->
        <div class="overskrift">
             <h1 data-i18n="form.lag_nyannonse">List a new ad</h1>
             <h2 data-i18n="form.velg_kat">Select category</h2>
        </div>

        <!-- Category Selection -->
        <div class="kategorierContainer">
             <div class="kategori" data-category="Torget">
                <i class="fas fa-chair"></i>
                <span data-i18n="kategori.torget">Marked</span>
            </div>
            <div class="kategori" data-category="Bil">
                <i class="fas fa-car"></i>
                <span data-i18n="kategori.bil">Car</span>
            </div>
            <div class="kategori" data-category="Eiendom">
                <i class="fas fa-home"></i>
                <span data-i18n="kategori.eiendom">Property</span>
            </div>
            <div class="kategori" data-category="Båt">
                <i class="fas fa-ship"></i>
                <span data-i18n="kategori.båt">Boat</span>
            </div>
            <div class="kategori" data-category="MC">
                <i class="fas fa-motorcycle"></i>
                <span data-i18n="kategori.mc">MC</span>
            </div>
            <div class="kategori" data-category="Jobb">
                <i class="fas fa-briefcase"></i>
                <span data-i18n="categories.jobb">Job</span>
            </div>
        </div>

        <!-- Form Container -->
        <div class="formContainer" id="productFormContainer">
            <form id="productForm" action="/api/products" method="POST" enctype="multipart/form-data" novalidate>
                <input type="hidden" id="Category" name="Category" value="">

                <!-- Product Fields (Torget) -->
                <div id="productFields" style="display: none;">
                    <h3 data-i18n="form.detaljer">Details for the product</h3>
                    <div class="form-group">
                        <label for="ProductName" data-i18n="form.product_name">Product Name <span class="required">*</span></label>
                        <input type="text" id="ProductName" name="ProductName" data-i18n="[placeholder]form.product_name_placeholder" placeholder="e.g., Used Sofa, iPhone X">
                        <div class="error-message" id="ProductNameError"></div>
                    </div>
                    <div class="form-group">
                        <label for="Price" data-i18n="form.price">Price</label>
                        <input type="number" id="Price" name="TorgetPrice" data-i18n="[placeholder]form.price_placeholder" placeholder="e.g., 1500">
                        <div class="error-message" id="PriceError"></div>
                    </div>
                    <div class="form-group">
                        <label for="SubCategori" data-i18n="form.category" id="subcategoryLabel">Category</label>
                        <select id="SubCategori" name="SubCategori">
                            <option value="Elektronikk" data-i18n="subkategori.elektronikk">Electronics</option>
                            <option value="Hvitvarer" data-i18n="subkategori.hvitvarer">White Goods</option>
                            <option value="Møbler" data-i18n="subkategori.møbler">Furniture</option>
                            <option value="Klær" data-i18n="subkategori.klær">Clothes</option>
                            <option value="Annet" data-i18n="subkategori.annet">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Description" data-i18n="form.description">Description</label>
                        <textarea id="Description" name="Description" data-i18n="[placeholder]form.description_placeholder_product" placeholder="Describe the item's condition, features, etc."></textarea>
                    </div>
                </div>

                <!-- Job Fields -->
                <div id="jobFields" style="display: none;">
                    <h3 data-i18n="form.job_details">Job Details</h3>
                    <div class="form-group">
                        <label for="JobTitle" data-i18n="form.job_title">Job Title <span class="required">*</span></label>
                        <input type="text" id="JobTitle" name="JobTitle" data-i18n="[placeholder]form.job_title_placeholder" placeholder="e.g., Software Engineer, Marketing Manager">
                        <div class="error-message" id="JobTitleError"></div>
                    </div>
                    <div class="form-group">
                        <label for="CompanyName" data-i18n="form.company_name">Company Name</label>
                        <input type="text" id="CompanyName" name="CompanyName" data-i18n="[placeholder]form.company_name_placeholder" placeholder="e.g., Tech Solutions Inc.">
                    </div>
                    <div class="form-group">
                        <label for="EmploymentType" data-i18n="form.employment_type">Employment Type</label>
                        <select id="EmploymentType" name="EmploymentType">
                            <option value="Fast" data-i18n="employment.full_time">Full Time</option>
                            <option value="Deltid" data-i18n="employment.part_time">Part Time</option>
                            <option value="Kontrakt" data-i18n="employment.contract">Contract</option>
                            <option value="Vikariat" data-i18n="employment.temporary">Temporary</option>
                            <option value="Lærling" data-i18n="employment.internship">Internship</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Salary" data-i18n="form.salary">Salary Range</label>
                        <input type="text" id="Salary" name="Salary" data-i18n="[placeholder]form.salary_placeholder" placeholder="e.g., 450,000 - 550,000 per year">
                    </div>
                    <div class="form-group">
                        <label for="JobDescription" data-i18n="form.job_description">Job Description</label>
                        <textarea id="JobDescription" name="JobDescription" data-i18n="[placeholder]form.job_description_placeholder" placeholder="Describe the position and responsibilities..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="ApplicationDeadline" data-i18n="form.deadline">Application Deadline</label>
                        <input type="date" id="ApplicationDeadline" name="ApplicationDeadline">
                    </div>
                    <div class="form-group">
                        <label for="ContactEmail" data-i18n="form.contact_email">Contact Email</label>
                        <input type="email" id="ContactEmail" name="ContactEmail" data-i18n="[placeholder]form.email_placeholder" placeholder="applications@company.com">
                    </div>
                    <div class="form-group">
                        <label for="ApplicationLink" data-i18n="form.application_link">Application Link (optional)</label>
                        <input type="url" id="ApplicationLink" name="ApplicationLink" data-i18n="[placeholder]form.url_placeholder" placeholder="https://">
                    </div>
                </div>

                <!-- Property Fields -->
                <div id="propertyFields" style="display: none;">
                    <h3 data-i18n="property.details">Property Details</h3>
                    <div class="form-group">
                        <label for="propertyTitle" data-i18n="form.title">Title <span class="required">*</span></label>
                        <input type="text" id="propertyTitle" name="ProductName" data-i18n="[placeholder]property.title_placeholder" placeholder="e.g., Modern Apartment Downtown, Cozy House with Garden">
                        <div class="error-message" id="propertyTitleError"></div>
                    </div>
                    <div class="form-group">
                        <label for="PropertyPrice" data-i18n="form.price">Price</label>
                        <input type="number" id="PropertyPrice" name="EiendomPrice" data-i18n="[placeholder]form.price_placeholder" placeholder="e.g., 3500000">
                        <div class="error-message" id="PropertyPriceError"></div>
                    </div>
                    <div class="form-group">
                        <label for="PropertyType" data-i18n="form.property_type">Property Type</label>
                        <select id="PropertyType" name="PropertyType">
                            <option value="" data-i18n="form.velg">Select</option>
                            <option value="House" data-i18n="property.house">House</option>
                            <option value="Apartment" data-i18n="property.apartment">Apartment</option>
                            <option value="Commercial" data-i18n="property.commercial">Commercial Property</option>
                            <option value="Land" data-i18n="property.land">Land</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Bedrooms" data-i18n="property.bedrooms">Bedrooms</label>
                        <input type="number" id="Bedrooms" name="Bedrooms" min="0" data-i18n="[placeholder]property.bedrooms_placeholder" placeholder="e.g., 3">
                    </div>
                    <div class="form-group">
                        <label for="Bathrooms" data-i18n="property.bathrooms">Bathrooms</label>
                        <input type="number" id="Bathrooms" name="Bathrooms" min="0" step="0.5" data-i18n="[placeholder]property.bathrooms_placeholder" placeholder="e.g., 2">
                    </div>
                    <div class="form-group">
                        <label for="SquareMeters" data-i18n="property.square_meters">Square Meters</label>
                        <input type="number" id="SquareMeters" name="SquareMeters" min="0" data-i18n="[placeholder]property.square_meters_placeholder" placeholder="e.g., 120">
                    </div>
                    <div class="form-group">
                        <label for="YearBuilt" data-i18n="property.year_built">Year Built</label>
                        <input type="number" id="YearBuilt" name="YearBuilt" min="1800" max="2030" data-i18n="[placeholder]property.year_built_placeholder" placeholder="e.g., 2015">
                    </div>
                    <div class="form-group">
                        <label for="PropertyDescription" data-i18n="form.description">Description</label>
                        <textarea id="PropertyDescription" name="Description" data-i18n="[placeholder]form.description_placeholder_property" placeholder="Describe the property's features, condition, location benefits, etc."></textarea>
                    </div>
                </div>

                <!-- Car Fields -->
                <div id="carFields" style="display: none;">
                    <!-- Car fields will be rendered dynamically by JavaScript -->
                </div>

                <!-- Boat Fields -->
                <div id="boatFields" style="display: none;">
                    <!-- Boat fields will be rendered dynamically by JavaScript -->
                </div>

                <!-- MC Fields -->
                <div id="mcFields" style="display: none;">
                    <!-- MC fields will be rendered dynamically by JavaScript -->
                </div>

                <!-- Common Fields -->
                <div class="form-group">
                    <label for="Country" data-i18n="form.country">Country <span class="required">*</span></label>
                    <select id="Country" name="Country">
                        <option value="">None selected</option>
                    </select>
                    <div class="error-message" id="CountryError"></div>
                </div>
                <div class="form-group">
                    <label for="City" id="cityLabel" style="display: none;" data-i18n="form.city">City <span class="required">*</span></label>
                    <select id="City" name="City" style="display: none;">
                        <option value="" data-i18n="form.select_city">Select City</option>
                    </select>
                    <div class="error-message" id="CityError"></div>
                </div>
                <div class="form-group">
                    <label for="Location" data-i18n="form.location">Location</label>
                    <input type="text" id="Location" name="Location" data-i18n="[placeholder]form.location_placeholder" placeholder="e.g., Street Name 123, Specific Area">
                </div>

                <!-- Image Upload Area -->
                <div class="form-group">
                    <label for="Images" data-i18n="form.upload_images">Upload Images (Max 5, 5MB each)</label>
                    <div id="dropZone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p data-i18n="form.drag_drop">Drag & Drop images here or click to select files</p>
                    </div>
                    <input type="file" id="Images" name="images" multiple accept="image/*" style="position: absolute; left: -9999px;">
                    <div id="imagePreviewContainer" style="display: none;"></div>
                </div>

                <!-- Error/Success Messages -->
                <div id="uploadError" class="error-message-container" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <span id="errorText"></span>
                </div>
                <div id="successMessageContainer" class="success-message-container" style="display: none;">
                    <i class="fas fa-check-circle"></i>
                    <span id="successText"></span>
                </div>

                <!-- Submit Button -->
                <div class="submit-container">
                    <!-- Clear button will be inserted here by JavaScript -->
                    <button type="submit" class="btn btn-primary" data-i18n="form.submit">Submit Ad</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="/js/app.js"></script>
</body>
</html>