<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="/ishtri1.png" sizes="16x16 32x32" type="image/png"> <!-- Use root-relative path -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" crossorigin="anonymous">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous"></noscript>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <%- include('partials/meta-tags') %>

    <!-- Layout Shift Prevention Optimizations -->
    <%- include('partials/optimized-head') %>

    <!-- Stylesheets and Scripts -->
    <link rel="stylesheet" href="/css/main.min.css"> <!-- Use root-relative path -->

</head>
<body data-page="productDetails">
    <%- include('partials/navbar') %>

    <div class="page-content">
    <div id="messageModal">
        <h3>Send Message to Owner</h3>
        <textarea id="messageInput" rows="5" cols="40" placeholder="Type your message here..."></textarea>
        <br><br>
        <button id="sendMessageButton" class="btn btn-primary" data-i18n="product_details.send">Send</button>
        <button id="cancelMessageButton" class="btn btn-secondary" data-i18n="product_details.cancel">Cancel</button>
    </div>
    <div id="overlay"></div>

    <div class="productDetailsContainer">
        <div id="productSkeleton" class="skeleton-container">
            <div class="skeleton-image skeleton"></div>
            <div class="skeleton-title skeleton"></div>
            <div class="skeleton-price skeleton"></div>
            <div class="skeleton-location skeleton"></div>
            <div class="skeleton-description skeleton"></div>
        </div>

        <div class="carousel" id="imageCarousel" style="display: none;">
            <!-- Images will be dynamically loaded -->
            <button class="prev">❮</button>
            <button class="next">❯</button>
        </div>

        <h1 id="productTitle" style="display: none;">Product Title</h1>
        <p style="display: none;"><strong data-i18n="product_details.price">Price</strong> <span id="productPrice"></span></p>
        <p style="display: none;"><strong data-i18n="product_details.location">Location:</strong> <span id="productLocation"></span></p>
        <p id="productDescription" style="display: none;">Product Description</p>

        <div class="product-actions">
            <button class="btn btn-primary sendMessage" id="contactOwner" style="display: none;" data-i18n="product_details.contact_owner">Contact owner</button>
            <button id="favoriteButton" class="btn btn-primary sendMessage" style="display: none;" data-i18n="product_details.favorite">Favorite</button>
        </div>
    </div>
    <div id="loginModal">
    <h3 data-i18n="product_details.login_required">You need to log in to favorite this product</h3>
    <p data-i18n="product_details.login_required_desc">Please log in to access this feature.</p>
    <div class="button-container">
        <button id="loginButton1" class="btn btn-primary" data-i18n="product_details.log_in">Log In</button>
        <button id="cancelLoginButton" class="btn btn-secondary" data-i18n="product_details.cancel">Cancel</button>
    </div>
</div>
<div id="loginOverlay"></div>

    </div>

    <div class="toast-container" id="toastContainer"></div>
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- Layout Shift Prevention Scripts -->
    <%- include('partials/optimized-scripts') %>

    <script>
        // No inline JavaScript - all functionality is in modular JS files
        // The productDetails page module will be loaded by app.js
    </script>
    <!-- Load Socket.IO and modular app.js -->
    <script type="module" src="/js/app.js"></script>
</body>
</html>
